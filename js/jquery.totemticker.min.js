(function(e){if(!e.omr){e.omr=new Object}e.omr.totemticker=function(t,n){var r=this;r.el=t;r.$el=e(t);r.$el.data("omr.totemticker",r);r.init=function(){r.options=e.extend({},e.omr.totemticker.defaultOptions,n);r.ticker;r.format_ticker();r.setup_nav();r.setup_scroll();r.start()};r.start_interval=function(){clearInterval(r.ticker);if(r.options.direction=="up"){r.ticker=setInterval(function(){r.$el.find("li:last").detach().prependTo(r.$el).css("marginTop","-"+r.options.row_height);r.$el.find("li:first").animate({marginTop:"0px"},r.options.speed,function(){r.$el.trigger("change")})},r.options.interval)}else{r.ticker=setInterval(function(){r.$el.find("li:first").animate({marginTop:"-"+r.options.row_height},r.options.speed,function(){e(this).detach().css("marginTop","0").appendTo(r.$el);r.$el.trigger("change")})},r.options.interval)}};r.reset_interval=function(){clearInterval(r.ticker);r.start_interval()};r.stop_interval=function(){clearInterval(r.ticker)};r.format_ticker=function(){r.$el.addClass("vTicker");if(typeof r.options.max_items!="undefined"&&r.options.max_items!=null){r.$el.find("li").outerHeight(r.options.row_height);var e=r.options.row_height.replace(/px/i,"");var t=e*r.options.max_items;r.$el.css({height:t+"px",overflow:"hidden"})}else{r.$el.css({overflow:"hidden"})}};r.setup_nav=function(){if(typeof r.options.stop!="undefined"&&r.options.stop!=null){e(r.options.stop).click(function(){r.stop();return false})}if(typeof r.options.start!="undefined"&&r.options.start!=null){e(r.options.start).click(function(){r.start();return false})}if(typeof r.options.previous!="undefined"&&r.options.previous!=null){e(r.options.previous).click(function(){r.previous();return false})}if(typeof r.options.next!="undefined"&&r.options.next!=null){e(r.options.next).click(function(){r.next();return false})}if(typeof r.options.mousestop!="undefined"&&r.options.mousestop===true){r.$el.mouseenter(function(){r.stop_interval()}).mouseleave(function(){if(r.options.isRunning){r.start_interval()}})}if(r.options.disableOnBlur){e(window).focus(function(){if(r.options.isRunning){r.start_interval()}});e(window).blur(function(){r.stop_interval()})}};r.setup_scroll=function(){if(typeof e.event.special.mousewheel!="undefined"){r.$el.mousewheel(function(){if(!r.options.scrolling&&r.options.mouse_scroll){r.options.scrolling=true;setTimeout(function(){r.options.scrolling=false},r.options.speed);if(event.wheelDeltaY>0||event.wheelDelta>0)r.previous();else r.next()}return false})}};r.debug_info=function(){console.log(r.options)};r.stop=function(){r.options.isRunning=false;r.stop_interval()};r.start=function(){r.options.isRunning=true;r.start_interval()};r.previous=function(){r.$el.find("li:last").detach().prependTo(r.$el).css("marginTop","-"+r.options.row_height);r.$el.find("li:first").animate({marginTop:"0px"},r.options.speed,function(){if(r.options.isRunning){r.reset_interval()}})};r.next=function(){r.$el.find("li:first").animate({marginTop:"-"+r.options.row_height},r.options.speed,function(){e(this).detach().css("marginTop","0px").appendTo(r.$el);if(r.options.isRunning){r.reset_interval()}})};r.init()};e.omr.totemticker.defaultOptions={message:"Ticker Loaded",next:null,previous:null,stop:null,start:null,row_height:"100px",speed:800,interval:4e3,max_items:null,mousestop:false,direction:"down",mouse_scroll:true,disableOnBlur:false};e.fn.totemticker=function(t,n){return this.each(function(){var r=e.data(this,"omr.totemticker");if(r){r[t].apply(r,n)}else{r=e.data(this,"omr.totemticker",new e.omr.totemticker(this,t))}})}})(jQuery)